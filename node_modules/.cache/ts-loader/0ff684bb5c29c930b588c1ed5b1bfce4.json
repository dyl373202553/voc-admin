{"remainingRequest":"C:\\Users\\YaLiDai\\Desktop\\voc-admin\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\YaLiDai\\Desktop\\voc-admin\\node_modules\\ts-loader\\index.js??ref--13-2!C:\\Users\\YaLiDai\\Desktop\\voc-admin\\src\\lib\\js\\request.ts","dependencies":[{"path":"C:\\Users\\YaLiDai\\Desktop\\voc-admin\\src\\lib\\js\\request.ts","mtime":1600149901319},{"path":"C:\\Users\\YaLiDai\\Desktop\\voc-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\YaLiDai\\Desktop\\voc-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\YaLiDai\\Desktop\\voc-admin\\node_modules\\ts-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmVudHJpZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzovVXNlcnMvWWFMaURhaS9EZXNrdG9wL3ZvYy1hZG1pbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7IFVzZXJNb2R1bGUgfSBmcm9tICJAL3N0b3JlL21vZHVsZS91c2VyIjsKaW1wb3J0IHsgQ29uZmlnTW9kdWxlIH0gZnJvbSAnQC9zdG9yZS9tb2R1bGUvY29uZmlnJzsKaW1wb3J0IHsgTW9kYWwgfSBmcm9tICd2aWV3LWRlc2lnbic7CnZhciBuZWVkTG9hZGluZ1JlcXVlc3RDb3VudCA9IDA7Cgp2YXIgc3RhcnRMb2FkaW5nID0gZnVuY3Rpb24gc3RhcnRMb2FkaW5nKCkgey8vIChTcGluIGFzIGFueSkuc2hvdygpCn07Cgp2YXIgZW5kTG9hZGluZyA9IGZ1bmN0aW9uIGVuZExvYWRpbmcoKSB7Ly8gKFNwaW4gYXMgYW55KS5oaWRlKCkKfTsKCnZhciBzaG93RnVsbFNjcmVlbkxvYWRpbmcgPSBmdW5jdGlvbiBzaG93RnVsbFNjcmVlbkxvYWRpbmcoKSB7CiAgaWYgKG5lZWRMb2FkaW5nUmVxdWVzdENvdW50ID09PSAwKSB7CiAgICBzdGFydExvYWRpbmcoKTsKICB9CgogIG5lZWRMb2FkaW5nUmVxdWVzdENvdW50Kys7Cn07Cgp2YXIgdHJ5SGlkZUZ1bGxTY3JlZW5Mb2FkaW5nID0gZnVuY3Rpb24gdHJ5SGlkZUZ1bGxTY3JlZW5Mb2FkaW5nKCkgewogIGlmIChuZWVkTG9hZGluZ1JlcXVlc3RDb3VudCA8PSAwKSByZXR1cm47CiAgbmVlZExvYWRpbmdSZXF1ZXN0Q291bnQtLTsKCiAgaWYgKG5lZWRMb2FkaW5nUmVxdWVzdENvdW50ID09PSAwKSB7CiAgICBlbmRMb2FkaW5nKCk7CiAgfQp9OwoKdmFyIGluc3RhbmNlID0gYXhpb3MuY3JlYXRlKHsKICB0aW1lb3V0OiAxMyAqIDEwMDAsCiAgYmFzZVVSTDogQ29uZmlnTW9kdWxlLmJhc2VVcmwsCiAgaGVhZGVyczogewogICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmOCIKICB9Cn0pOwppbnN0YW5jZS5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogIHJldHVybiBuZXcgUHJvbWlzZSggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHJlc29sdmUpIHsKICAgICAgdmFyIGFjY2Vzc190b2tlbjsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGFjY2Vzc190b2tlbiA9ICIiOwoKICAgICAgICAgICAgICBpZiAoIShjb25maWcudXJsICE9ICd1YWEvb2F1dGgvdG9rZW4nKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgIHJldHVybiBVc2VyTW9kdWxlLnRva2VuOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGFjY2Vzc190b2tlbiA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY29uZmlnLmhlYWRlcnMuQXV0aG9yaXphdGlvbiA9ICJCYXNpYyBkMlZpWDJGd2NEbz0iOwoKICAgICAgICAgICAgICBpZiAoY29uZmlnLm1ldGhvZCA9PT0gInBvc3QiKSB7CiAgICAgICAgICAgICAgICBpZiAoY29uZmlnLnVybCAhPSAndWFhL29hdXRoL3Rva2VuJykgewogICAgICAgICAgICAgICAgICBjb25maWcuaGVhZGVycy5BdXRob3JpemF0aW9uID0gIkJlYXJlciAiLmNvbmNhdChhY2Nlc3NfdG9rZW4pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0gZWxzZSBpZiAoY29uZmlnLm1ldGhvZCA9PT0gImdldCIpIHsKICAgICAgICAgICAgICAgIGlmIChjb25maWcudXJsICE9ICd1YWEvb2F1dGgvdG9rZW4nKSB7CiAgICAgICAgICAgICAgICAgIGNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSAiQmVhcmVyICIuY29uY2F0KGFjY2Vzc190b2tlbik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBzaG93RnVsbFNjcmVlbkxvYWRpbmcoKTsKICAgICAgICAgICAgICByZXNvbHZlKGNvbmZpZyk7CgogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpOwoKICAgIHJldHVybiBmdW5jdGlvbiAoX3gpIHsKICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH07CiAgfSgpKTsKfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsKaW5zdGFuY2UuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZSggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICB2YXIgX3JlZjIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKHJlc3BvbnNlKSB7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICB0cnlIaWRlRnVsbFNjcmVlbkxvYWRpbmcoKTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUyKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiAoX3gyKSB7CiAgICByZXR1cm4gX3JlZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCksIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYzID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMyhlcnJvcikgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgLy8gYXdhaXQgVXNlck1vZHVsZS5tb25pdG9yKCk7CiAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZS5zdGF0dXMgPT0gNDAxKSB7CiAgICAgICAgICAgICAgTW9kYWxbImVycm9yIl0oewogICAgICAgICAgICAgICAgdGl0bGU6ICfkvJror53otoXml7YnLAogICAgICAgICAgICAgICAgY29udGVudDogJ+ivt+mHjeaWsOeZu+W9lScsCiAgICAgICAgICAgICAgICBva1RleHQ6ICflpb3nmoQnLAogICAgICAgICAgICAgICAgb25PazogZnVuY3Rpb24gb25PaygpIHsKICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnaHR0cDovLzRhcG9ydGFsLmJtY2MuY29tLmNuLyc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRyeUhpZGVGdWxsU2NyZWVuTG9hZGluZygpOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgUHJvbWlzZS5yZWplY3QoZXJyb3IpKTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUzKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiAoX3gzKSB7CiAgICByZXR1cm4gX3JlZjMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCkpOwpleHBvcnQgZnVuY3Rpb24gZm9ybWF0ZVVSTE9ubHlHZXQobGluaywganNvbikgewogIHZhciB1cmwgPSBsaW5rOwogIHZhciBkYXRhID0gT2JqZWN0LmVudHJpZXMoanNvbik7CgogIGlmIChkYXRhLmxlbmd0aCkgewogICAgdXJsICs9IHVybC5pbmRleE9mKCI/IikgPT0gLTEgPyAiPyIgOiAiIjsKICAgIHVybCArPSBPYmplY3QuZW50cmllcyhkYXRhKS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgcmV0dXJuIGl0ZW1bMV0uam9pbigiPSIpOwogICAgfSkuam9pbigiJiIpOwogIH0KCiAgcmV0dXJuIHVybDsKfQp2YXIgZm9ybURhdGEgPSB7CiAgdHJhbnNmb3JtUmVxdWVzdDogW2Z1bmN0aW9uIChkYXRhKSB7CiAgICB2YXIgcmV0ID0gIiI7CgogICAgZm9yICh2YXIgaXQgaW4gZGF0YSkgewogICAgICByZXQgKz0gZW5jb2RlVVJJQ29tcG9uZW50KGl0KSArICI9IiArIGVuY29kZVVSSUNvbXBvbmVudChkYXRhW2l0XSkgKyAiJiI7CiAgICB9CgogICAgcmV0dXJuIHJldDsKICB9XSwKICBoZWFkZXJzOiB7CiAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIKICB9Cn07Ci8qKg0KICogR0VU6K+35rGC5pa55rOVDQogKiBAcGFyYW0ge1N0cmluZ30gdXJsIOivt+axguWcsOWdgA0KICogQHBhcmFtIHtqc29ufSBqc29uIOivt+axguWPguaVsA0KICovCgpleHBvcnQgZnVuY3Rpb24gZ2V0RGF0YSh1cmwsIGpzb24pIHsKICByZXR1cm4gaW5zdGFuY2UuZ2V0KGZvcm1hdGVVUkxPbmx5R2V0KHVybCwganNvbikpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgcmV0dXJuIHJlcy5kYXRhOwogIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgcmV0dXJuIGVycm9yLnJlc3BvbnNlOwogIH0pOwp9CmV4cG9ydCBmdW5jdGlvbiBwb3N0RGF0YSh1cmwsIGpzb24pIHsKICB2YXIgaXNmb3JtRGF0YSA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogdHJ1ZTsKICByZXR1cm4gaW5zdGFuY2UucG9zdCh1cmwsIGpzb24sIGlzZm9ybURhdGEgPyBmb3JtRGF0YSA6IHt9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgIHJldHVybiByZXMuZGF0YTsKICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgIHJldHVybiBlcnJvci5yZXNwb25zZTsKICB9KTsKfQ=="},{"version":3,"sources":["C:\\Users\\YaLiDai\\Desktop\\voc-admin\\src\\lib\\js\\request.ts"],"names":[],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport { UserModule } from \"@/store/module/user\";\r\nimport { ConfigModule } from '@/store/module/config';\r\nimport { Modal, Spin } from 'view-design'\r\n\r\nlet needLoadingRequestCount = 0\r\nconst startLoading = () => {\r\n    // (Spin as any).show()\r\n}\r\n\r\nconst endLoading = () => {\r\n    // (Spin as any).hide()\r\n}\r\n\r\nconst showFullScreenLoading = () => {\r\n    if (needLoadingRequestCount === 0) {\r\n        startLoading()\r\n    }\r\n    needLoadingRequestCount++\r\n}\r\n\r\nconst tryHideFullScreenLoading = () => {\r\n    if (needLoadingRequestCount <= 0) return\r\n    needLoadingRequestCount--\r\n    if (needLoadingRequestCount === 0) {\r\n        endLoading()\r\n    }\r\n}\r\n\r\nconst instance = axios.create({\r\n    timeout: 13 * 1000,\r\n    baseURL: ConfigModule.baseUrl,\r\n    headers: {\r\n        \"Content-Type\": \"application/json;charset=utf8\"\r\n    }\r\n});\r\n\r\ninstance.interceptors.request.use(\r\n    config => {\r\n        return new Promise(async resolve => {\r\n            let access_token: string | undefined = \"\"\r\n            if (config.url != 'uaa/oauth/token') access_token = await UserModule.token;\r\n            config.headers.Authorization = `Basic d2ViX2FwcDo=`\r\n\r\n            if (config.method === \"post\") {\r\n                if (config.url != 'uaa/oauth/token') {\r\n                    config.headers.Authorization = `Bearer ${access_token}`\r\n                }\r\n            } else if (config.method === \"get\") {\r\n                if (config.url != 'uaa/oauth/token') {\r\n                    config.headers.Authorization = `Bearer ${access_token}`\r\n                }\r\n            }\r\n\r\n            showFullScreenLoading()\r\n            resolve(config)\r\n        })\r\n    },\r\n    error => {\r\n        Promise.reject(error);\r\n    }\r\n)\r\n\r\ninstance.interceptors.response.use(\r\n    async response => {\r\n        tryHideFullScreenLoading()\r\n\r\n        return response;\r\n    },\r\n    async error => {\r\n        // await UserModule.monitor();\r\n        if (error.response.status == 401) {\r\n            (Modal as any)[\"error\"]({\r\n                title: '会话超时',\r\n                content: '请重新登录',\r\n                okText: '好的',\r\n                onOk: () => {\r\n                    window.location.href = 'http://4aportal.bmcc.com.cn/';\r\n                }\r\n            });\r\n        }\r\n        tryHideFullScreenLoading()\r\n        return Promise.reject(error);\r\n    }\r\n);\r\n\r\nexport function formateURLOnlyGet(link: string, json: object) {\r\n    let url = link;\r\n    var data = Object.entries(json);\r\n\r\n    if (data.length) {\r\n        url += url.indexOf(\"?\") == -1 ? \"?\" : \"\";\r\n        url += Object.entries(data)\r\n            .map(item => {\r\n                return item[1].join(\"=\");\r\n            })\r\n            .join(\"&\");\r\n    }\r\n    return url;\r\n}\r\n\r\nconst formData = {\r\n    transformRequest: [function (data: any) {\r\n        let ret = \"\"\r\n        for (let it in data) {\r\n            ret += encodeURIComponent(it) + \"=\" + encodeURIComponent(data[it]) + \"&\"\r\n        }\r\n        return ret\r\n    }],\r\n    headers: {\r\n        \"Content-Type\": \"application/x-www-form-urlencoded\"\r\n    }\r\n}\r\n\r\n/**\r\n * GET请求方法\r\n * @param {String} url 请求地址\r\n * @param {json} json 请求参数\r\n */\r\nexport function getData(url: string, json: object) {\r\n    return instance\r\n        .get(formateURLOnlyGet(url, json))\r\n        .then(res => res.data)\r\n        .catch(error => error.response);\r\n}\r\n\r\nexport function postData(url: string, json?: any, isformData = true) {\r\n    return instance\r\n        .post(url, json, isformData ? formData : {})\r\n        .then(res => res.data)\r\n        .catch(error => error.response);\r\n}"],"sourceRoot":""}]}